import logging
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, MessageHandler, filters, CallbackContext

logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

TOKEN = ""

async def start(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("ðŸ“˜ Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð·ÐµÑ† (5 Ð»ÐµÑ‚)", callback_data="old")],
        [InlineKeyboardButton("ðŸ“— Ð‘Ð¸Ð¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ (10 Ð»ÐµÑ‚)", callback_data="new")],
        [InlineKeyboardButton("â“ Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ", callback_data="compare")],
        [InlineKeyboardButton("â„¹ï¸ Ðž Ð±Ð¾Ñ‚Ðµ", callback_data="about")]
    ]
    
    await update.message.reply_text(
        "ðŸ‘‹ Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð·Ð°Ð³Ñ€Ð°Ð½Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚Ð°:",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

async def old_passport_menu(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("ðŸ“„ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹", callback_data="old_docs")],
        [InlineKeyboardButton("ðŸ› ÐšÑƒÐ´Ð° Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒÑÑ", callback_data="old_where")],
        [InlineKeyboardButton("âœï¸ Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ", callback_data="old_form")],
        [InlineKeyboardButton("ðŸ’° Ð“Ð¾ÑÐ¿Ð¾ÑˆÐ»Ð¸Ð½Ð°", callback_data="old_payment")],
        [InlineKeyboardButton("â± Ð¡Ñ€Ð¾ÐºÐ¸", callback_data="old_time")],
        [InlineKeyboardButton("â¬…ï¸ ÐÐ°Ð·Ð°Ð´", callback_data="back_start")]
    ]
    
    await update.callback_query.edit_message_text(
        "ðŸ“˜ **ÐŸÐ°ÑÐ¿Ð¾Ñ€Ñ‚ ÑÑ‚Ð°Ñ€Ð¾Ð³Ð¾ Ð¾Ð±Ñ€Ð°Ð·Ñ†Ð°**\nÐ’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»:",
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode="Markdown"
    )

async def new_passport_menu(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("ðŸ“„ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹", callback_data="new_docs")],
        [InlineKeyboardButton("ðŸ› ÐšÑƒÐ´Ð° Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒÑÑ", callback_data="new_where")],
        [InlineKeyboardButton("âœï¸ Ð—Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ", callback_data="new_form")],
        [InlineKeyboardButton("ðŸ’° Ð“Ð¾ÑÐ¿Ð¾ÑˆÐ»Ð¸Ð½Ð°", callback_data="new_payment")],
        [InlineKeyboardButton("â± Ð¡Ñ€Ð¾ÐºÐ¸", callback_data="new_time")],
        [InlineKeyboardButton("â¬…ï¸ ÐÐ°Ð·Ð°Ð´", callback_data="back_start")]
    ]
    
    await update.callback_query.edit_message_text(
        "ðŸ“— **Ð‘Ð¸Ð¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚**\nÐ’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»:",
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode="Markdown"
    )

async def compare_passports(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("ðŸ“˜ Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ð¹", callback_data="old")],
        [InlineKeyboardButton("ðŸ“— Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹", callback_data="new")],
        [InlineKeyboardButton("â¬…ï¸ ÐÐ°Ð·Ð°Ð´", callback_data="back_start")]
    ]
    
    await update.callback_query.edit_message_text(
        "ðŸ“Š **Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ:**\n\n"
        "ðŸ“˜ **Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ (5 Ð»ÐµÑ‚):**\nâ€¢ 2000 Ñ€ÑƒÐ±\nâ€¢ Ð¤Ð¾Ñ‚Ð¾ ÑÐ²Ð¾Ðµ\nâ€¢ Ð’ ÐœÐ¤Ð¦\n\n"
        "ðŸ“— **ÐÐ¾Ð²Ñ‹Ð¹ (10 Ð»ÐµÑ‚):**\nâ€¢ 5000 Ñ€ÑƒÐ±\nâ€¢ Ð¤Ð¾Ñ‚Ð¾ Ð½Ð° Ð¼ÐµÑÑ‚Ðµ\nâ€¢ Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÐœÐ’Ð”",
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode="Markdown"
    )

async def about_bot(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("â¬…ï¸ Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ", callback_data="back_start")]
    ]
    
    await update.callback_query.edit_message_text(
        "â„¹ï¸ **Ðž Ð±Ð¾Ñ‚Ðµ:**\n\n"
        "Ð‘Ð¾Ñ‚-Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð¿Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸ÑŽ Ð·Ð°Ð³Ñ€Ð°Ð½Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚Ð°.\n"
        "Ð’ÐµÑ€ÑÐ¸Ñ 1.0\n\n"
        "Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð´Ð»Ñ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸.",
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode="Markdown"
    )

async def placeholder(update: Update, context: CallbackContext) -> None:
    callback_data = update.callback_query.data
    
    if callback_data.startswith("old_"):
        back_button = [InlineKeyboardButton("â¬…ï¸ ÐÐ°Ð·Ð°Ð´ Ðº ÑÑ‚Ð°Ñ€Ð¾Ð¼Ñƒ", callback_data="old")]
    elif callback_data.startswith("new_"):
        back_button = [InlineKeyboardButton("â¬…ï¸ ÐÐ°Ð·Ð°Ð´ Ðº Ð½Ð¾Ð²Ð¾Ð¼Ñƒ", callback_data="new")]
    else:
        back_button = [InlineKeyboardButton("â¬…ï¸ Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ", callback_data="back_start")]
    
    keyboard = [back_button]
    
    await update.callback_query.edit_message_text(
        f"ðŸ“‹ **Ð Ð°Ð·Ð´ÐµÐ»:** {callback_data}\n\n"
        "Ð­Ñ‚Ð¾ Ð´ÐµÐ¼Ð¾-Ð²ÐµÑ€ÑÐ¸Ñ Ð±Ð¾Ñ‚Ð°. Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð» Ð² Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ.",
        reply_markup=InlineKeyboardMarkup(keyboard),
        parse_mode="Markdown"
    )

async def button_handler(update: Update, context: CallbackContext) -> None:
    query = update.callback_query
    await query.answer()
    
    callback_data = query.data
    
    if callback_data == "old":
        await old_passport_menu(update, context)
    elif callback_data == "new":
        await new_passport_menu(update, context)
    elif callback_data == "compare":
        await compare_passports(update, context)
    elif callback_data == "about":
        await about_bot(update, context)
    elif callback_data == "back_start":
        keyboard = [
            [InlineKeyboardButton("ðŸ“˜ Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð·ÐµÑ† (5 Ð»ÐµÑ‚)", callback_data="old")],
            [InlineKeyboardButton("ðŸ“— Ð‘Ð¸Ð¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ (10 Ð»ÐµÑ‚)", callback_data="new")],
            [InlineKeyboardButton("â“ Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ", callback_data="compare")],
            [InlineKeyboardButton("â„¹ï¸ Ðž Ð±Ð¾Ñ‚Ðµ", callback_data="about")]
        ]
        await query.edit_message_text(
            "ðŸ‘‹ Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð·Ð°Ð³Ñ€Ð°Ð½Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚Ð°:",
            reply_markup=InlineKeyboardMarkup(keyboard)
        )
    else:
        await placeholder(update, context)

async def handle_message(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("ðŸ“˜ Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ Ð¾Ð±Ñ€Ð°Ð·ÐµÑ†", callback_data="old")],
        [InlineKeyboardButton("ðŸ“— Ð‘Ð¸Ð¾Ð¼ÐµÑ‚Ñ€Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹", callback_data="new")],
        [InlineKeyboardButton("â“ Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚ÑŒ", callback_data="compare")]
    ]
    
    await update.message.reply_text(
        "ðŸ‘‹ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð´Ð»Ñ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ Ð¸Ð»Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ /start",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

def main() -> None:
    application = Application.builder().token(TOKEN).build()
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CallbackQueryHandler(button_handler))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    
    print("ðŸ¤– Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½...")
    application.run_polling()

if __name__ == '__main__':
    main()
